# 2025-07-15

## 오늘의 일정 정리

- 10:00 ~ 10:30 데일리 스크럼
- 10:30 ~ 12:30 미션 2주차 1단계 진행
- 12:30 ~ 13:30 점심
- 13:30 ~ 14:00 미션 2주차 1단계 진행
- 14:00 ~ 15:30 그룹 세션
- 15:30 ~ 17:00 미션 2주차 1단계 진행
- 17:00 ~ 18:00 코드 리뷰
- 18:00 ~ 19:00 종합 프로젝트 미팅

---

### 오늘 작업한 내용

HttpResponse 객체를 생성하여 HTTP 응답을 객체로 관리하도록 수정

- 배운 것
    - Http 응답의 구조
    - 헤더의 경우 RFC 문서(7230)에 따르면 순서가 명시적으로 정해져 있지는 않지만, 관례적으로 추천되는 헤더의 순서는 존재한다.
- 어려웠던 점
    - 정확한 형식의 HTTP 응답에서 벗어나게 되면 의도하지 않은 응답이 전달되고, 이로 인해서 클라이언트에서 처리가 제대로 되지 않아 잘못된 부분을 찾는데에 애를 먹었다.
      문제는 Header 와 Body 사이에 개행이 한 번 더 들어갔기 때문에 발생했는데, 이로 인해 HTML 파일 전체가 텍스트로 변환되는 것을 경험했다. String의 경우 특히 더 세심하게 다루어야겠다는
      생각이 들었다.

HTTP 요청에서 body와 Header를 파싱

- 배운 것
    - HTTP 요청에서 body가 존재하는 경우에는 Content-Length 의 길이가 body 길이로 설정이 되어 있어서 이를 바탕으로 InputStream 에서 body에 해당하는 데이터를 읽어올 수
      있다는 것을 알았다.
- 어려웠던 점
    - 헤더의 경우에는 ':' 를 기준으로 앞에는 키 값, 뒤에는 밸류 값이 존재한다고 생각했는데, Host : localhost:8080 과 같이 :가 밸류에 포함되는 경우가 존재해서 이에 관련하여 파싱을 할
      때 첫 콜론을 기준으로 파싱을 하도록 구현했다.
    - 밸류 값이 여러 개 존재할 경우 ',' 을 기준으로 나누어진다고 생각했는데 헤더의 종류에 따라서 ',' 값이 밸류 자체에 포함될 수도 있다는 것을 알았다. 이와 관련해서 파싱 로직에 대해서 고민해볼 필요가
      있다.

---

### 오늘 고민한 내용

static 메서드 사용

- 고민한 이유
    - static 의 경우에는 무작정 테스트 과정에서 활용하기가 어렵다는 기존 고정 관념, 어디선가 본 구인글에서 *static 메서드의 남발을 하지 않는 개발자* 라는 내용..
- 내가 내린 결론
    - HttpMessageParser 와 HttpMessageSender 의 메서드는 그대로 static 메서드로 두고 사용하도록 한다.
- 이유
    - 해당 클래스들에서 외부 의존성(DB, 파일 등)을 가지고 있지 않아 테스트 환경에서 문제가 발생하지 않고, 내부 상태를 가지고 있지 않으며 객체를 반환하거나 단순 출력만 한다는 점에서 문제가 없이 사용
      가능하다고 판단했다.

Resolver 이전에 새로운 계층의 도입의 필요성

- 고민한 이유
    - 첫번째, Resolver가 요청 처리 후 HttpMessageSender를 통해서 응답을 전송하도록 하는 코드를 갖고 있어서, 현재 구상한 WAS의 구조에서의 Resolver 는 요청을 처리하고
      HttpResponse 객체를 반환한다. 라는 내용과 위반된다.
    - 두번쨰, Resolver가 요청을 처리하는 과정에서 예외가 발생한다면 예외에 해당하는 Http 응답을 전송하는 로직을 Resolver 와 분리하고 싶음.  
      따라서 Resolver 는 요청 처리에 성공하면 HttpResponse 객체 반환, 모종의 이유로 실패하면 예외를 던지고, 이 예외를 잡아서 예외와 관련한 Http 응답을 새로운 계층에서 처리하여 응답
- 내가 내린 결론
    - 새로운 계층을 생성하도록 한다.
- 이유
  - Resolver 는 단순히 요청에 대한 핵심 로직만을 수행하도록 하고 싶다. 반환된 객체를 바탕으로 응답을 생성하고 전송하는 것을 새로운 계층으로 분리하는 것이 깔끔하다.
  - 예외 처리와 예외에 해당하는 응답에 대한 코드를 Resolver에 작성하는 경우 동일한 코드가 매우 많이 생기게 되므로 이를 처리하는 부분을 추상화하는 것이 알맞다.

### 일간 회고

Keep

- 미션 진행 과정에서 현재 내가 고민하고 있는 것들을 오늘은 글로 적어가며 정리를 해보고 내가 생각하는 올바른 방향에 대해서 먼저 작성한 뒤 학습을 통해 내가 생각했던 것과 비교를 하는 방식을 사용해보았다.
  문제를 정의하고 정리하는 과정에서 기록이 남아있다보니 내가 어떤 고민을 했는지 확인하기도 쉬워졌고, 또 다른 문제로 확장해 나가는 과정 또한 수월했다. 이 방식을 통해서 오늘 내가 구상하고 있는 WAS 의 구조에
  대해서 체계적으로 정리가 되었다.

Problem

- 코드 리뷰 과정에서 commit 내역을 통해 리뷰를 하자니 커밋이 쌓이면서 과거 커밋 내용이 완전 뒤집어지는 경우가 생겼다.
  전체 파일을 통해 리뷰하자니 볼륨이 너무 커지는 문제가 발생해서 둘을 번걸아가며 확인했는데 코드의 가독성도 떨어지고 효율적이지 못했다.  
  내일은 해당 PR 브랜치의 소스 코드를 다운 받고, commit 내역을 통해
  코드 수정 흐름을 참고하며 리뷰를 해보면 좋을 것 같다.
- 종합 프로젝트에서 기획 팀원이 제시해준 솔루션에서 무언가 부족함을 느꼈는데 어떤 부분에서 부족함을 느끼고 있는지 말로 설명하기가 어려웠다. 이 부분도 글로 작성해보면서 생각을 해보면 좀 더 의식의 흐름이 명확하게
  잡히지 않았을까 싶다.

Try

- 회고에 대한 생각을 정리하는 시간보다 파편화되어 있는 오늘의 자료를 모으는데 더 많은 시간이 걸리는 것 같다. 미션 진행에 대한 학습이나 고민 내용은 미션 프로젝트의 README 에 작성하고, 그 외 내용에 대해서는 위키의 README에 미리 작성해두고 정리하도록 해보자
- 종합 프로젝트 관련해서 나의 생각과 의견을 더 적극적으로 표현해보면 좋을 것 같다. 다른 사람의 의견에 공감하기만해서는 내 생각을 다른 팀원이 알 수가 없다..

--- 

### 오늘 학습한 내용
추가로 학습하기 보다는 고민한 내용들이 많았기 때문에 따로 학습한 내용을 정리하지 않았다.11
